<link rel="import" href="shared/index.html">
<link rel="import" href="core/routers.html">

<link rel="lazy-import" href="main/waterschedule-view.html">
<link rel="lazy-import" href="main/watervalve-view.html">

<dom-module id="main-view">
  <template>
    <app-location route="{{route}}" url-space-regex="^[[rootPath]]"></app-location>
    <app-route
      route="{{route}}"
      pattern="[[rootPath]]main/:path"
      data="{{routeData}}"
      tail="{{subroute}}"></app-route>

    <iron-pages
      selected="[[page]]"
      attr-for-selected="path"
      fallback-selection="errors/404-view"
      role="main">
      <main-waterschedule-view path="main/waterschedule-view"></main-waterschedule-view>
      <main-watervalve-view path="main/watervalve-view"></main-watervalve-view>
      <errors-404-view path="errors/404-view"></errors-404-view>
    </iron-pages>
  </template>

  <script>
    class MainView extends RouterMixin(Polymer.Element, {rootPath: 'main/', defaultPage: 'watervalve'}) {
      static get is() {
        return 'main-view';
      }
    }

    window.customElements.define(MainView.is, MainView);
  </script>
</dom-module>
